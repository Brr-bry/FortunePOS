<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Receipt - Fortune POS</title>
  <link rel="stylesheet" href="receipt.css" />
</head>
<body>
  <div class="receipt-container">
    <div class="receipt-box">
      <h2>THANK YOU!</h2>

      <table>
        <thead>
          <tr>
            <th>Item</th>
            <th>Qty</th>
            <th>Amount</th>
          </tr>
        </thead>
        <tbody id="receipt-items"></tbody>
        <tfoot>
          <tr>
            <td colspan="2">TAX</td>
            <td id="tax">0 PHP</td>
          </tr>
          <tr>
            <td colspan="2">Delivery</td>
            <td id="delivery">40 PHP</td>
          </tr>
          <tr class="total-row">
            <td colspan="2"><strong>Total:</strong></td>
            <td><strong id="total">0 PHP</strong></td>
          </tr>
        </tfoot>
      </table>

      <p class="date">Invoice Date: <span id="date"></span></p>
      <img src="icons/maya.png" alt="Maya" class="maya-logo" />
    </div>
  </div>

  <script>
    const cart = JSON.parse(localStorage.getItem("cart") || "[]");
    const receiptItems = document.getElementById("receipt-items");
    const taxCell = document.getElementById("tax");
    const totalCell = document.getElementById("total");
    const dateCell = document.getElementById("date");

    const date = new Date().toLocaleDateString('en-GB', {
      day: '2-digit',
      month: 'short',
      year: 'numeric'
    });
    dateCell.textContent = date;

    let subtotal = 0;

    cart.forEach(item => {
      const tr = document.createElement("tr");
      tr.innerHTML = `
        <td>${item.name}</td>
        <td>${item.qty}</td>
        <td>${item.price * item.qty} PHP</td>
      `;
      receiptItems.appendChild(tr);
      subtotal += item.price * item.qty;
    });

    const tax = Math.round(subtotal * 0.10);
    const delivery = 40;
    const total = subtotal + tax + delivery;

    taxCell.textContent = `${tax} PHP`;
    totalCell.textContent = `${total} PHP`;

    // Optional: clear cart
    localStorage.removeItem("cart");

    // Redirect to index.html after 5 seconds
    setTimeout(() => {
      window.location.href = "index.html";
    }, 5000);
  </script>
</body>
</html>
